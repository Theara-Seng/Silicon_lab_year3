/*
 * HC-SR04.c
 *
 *  Created on: Apr 22, 2021
 *      Author: sengt
 */


#include "HC-SR04.h"

uint8_t  hc_sr04_get_distance(uint16_t *distance){

  CKCON0 =CKCON0_T0M__PRESCALE | CKCON0_SCA__SYSCLK_DIV_48;
  TMOD |= TMOD_T0M__MODE1;
  TH0=0X00;
  TL0=0X00;


  HC_SR04_TRIGGER=0;
  HC_SR04_TRIGGER=1;
   __asm__ __nop;
  TCON_TR0=1;
  while(1){
      if(TCON_TF0==1){

          TCON_TF0=0;
          TH0=0XFE;
          TL0=0X01;
          //TCON_TR0=1;
      }
}
